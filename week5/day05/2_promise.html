<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

</body>

</html>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script>
    /* Promise  专为处理异步回调而生 */
    //p有三个状态  pending 等待状态  resolved 成功状态 rejected 失败状态
    //状态一经改变 状态就不会再发生任何改变
    let p = new Promise(function(res,rej){
     /*    //executor 回调函数 此函数执行时候里面的形参是由Promise传进去的
        console.log(res,rej)
        res(123);//同步把转态改成了resolved 
        console.log(qqq);
        rej(999);
        console.log(111) */

       /*  setTimeout(()=>{
            console.log(aaa);//异步的错误信息 then捕获不到
        }) */

        $.ajax({//JQ里面的异步 可以捕获到错误信息
            url:'./data.json',
            success:res,
            error:rej,
        })
    })
    //then里面具体执行哪个函数是由executor决定的 then是异步执行
    p.then(function(data){
        //对应res函数
        console.log(data)
    },function(err){
        //对应rej
        console.log(err)
    }).catch(err=>{
        console.log('catch',err);
    }).finally(()=>{
        console.log('不管成功还是失败都会执行的')
    })
    // console.log(p)
    Promise.all([p,p1,p1]).then(()=>{},()=>{})//p p1 p2都成功才会走then 的第一个参数 
    Promise.race([p,p1,p2]).then((data)=>{},()=>{})//不管成功还是失败 ，只要谁先执行完then是就是谁的
    Promise.reject('执行失败').then((data)=>{},()=>{})//手动创造一个失败 态
    Promise.resolve('执行成功').then(()=>{})//手动创造一个成功 态
</script>