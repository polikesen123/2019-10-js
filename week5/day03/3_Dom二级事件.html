<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        div {
            box-sizing: border-box;
        }

        #outer {
            width: 500px;
            height: 500px;
            background: red;
            margin: 50px auto;
            padding: 50px;
        }

        #center {
            width: 400px;
            height: 400px;
            background: lawngreen;
            /* margin: 50px auto; */
            padding: 50px;
        }

        #inner {
            width: 300px;
            height: 300px;
            background: gold;
            /* padding: 50px; */
            /* margin: 50px auto; */
        }
    </style>
</head>

<body>
    <div id="outer">
        <div id="center">
            <div id="inner"></div>
        </div>
    </div>
</body>

</html>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script>
    var outer = document.getElementById('outer');
    var center = document.getElementById('center');
    var inner = document.getElementById('inner');
    //DOM零级事件绑定
    // box.onclick = function(){
    //     console.log(666)
    // }
    // box.onclick = function(){
    //     console.log(7777)
    // }
    //JQ是利用了DOM的二级事件绑定
    // $('#box').on('click',function(){
    //     console.log(1111)
    // })
    // $('#box').on('click',function(){
    //     console.log(22222)
    // });
    // outer.addEventListener('click', function () {
    //     console.log(333)

    // },false);
    // outer.addEventListener('click', function () {
    //     console.log(333333)
    // },false);//false代表 对应的函数需要在冒泡阶段触发  true 代表对应的函数需要在捕获阶段触发，一般都是false 默认也是false
    // outer.removeEventListener('click', function () {
    //     console.log(333333)
    // },false);
    // center.addEventListener('click', function () {
    //     console.log(222);
    // })
    // center.addEventListener('click', function () {
    //     console.log(222222);
    // })
    // inner.addEventListener('click', function () {
    //     console.log(111);
    // });
    // outer.attachEvent('onclick',function(){}) IE低版本
    function fn(e) {
        console.log(11, e.target)
    }
    inner.addEventListener("click", fn, true);
    inner.removeEventListener("click", fn, true); //只有第三个参数一致remove才会起作用
    window.addEventListener('load', function () {
        console.log('load')
    }, false)

    function complete() {
        console.log('你的业务代码');
        window.removeEventListener('load', complete, false);
    }
    window.addEventListener('load', complete, false)


    //模拟ready
    window.ready = function (cb) {
        window.addEventListener('DOMContentLoaded', cb, false)
    }

    window.ready(function () {
        console.log('结构加载完成')
    })


    /*
        DOM 2级事件绑定   元素.addEventListener('事件类型',回调函数,冒泡阶段或者捕获阶段)
                                attachEvent('on事件类型',回调函数) detachEvent('on事件名',回调函数)
        2级事件的同一个元素的同一个事件  可以绑定多个回调函数

     */
    $('#inner').one('click', function () {
        console.log('one')
    });
    // inner.one('click',function(){
    //     console.log('myone')
    // })

    Element.prototype.one = function (type, callback) {
        //this
        function f(e) {
            callback.call(this,e);
            this.removeEventListener(type, f, false);
        }
        this.addEventListener(type, f, false);
    }
    inner.one('click', function (e) {
        console.log('myone',e,this)
    });
</script>