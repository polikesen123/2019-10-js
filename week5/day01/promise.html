<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
</html>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script>
    // $.ajax({
    //     url:'./data.json',
    //     success:function(data){
    //         $.ajax({
    //             url:'./data.json',
    //             success:function(data){

    //             }
    //         })
    //     }
    // })
    //executor
    //Promise实例有三个状态 分别是pending  resolved  rejected
    //pending代表当前的promise还处在 等待状态
    //resolved代表当前走了成功的回调函数
    //rejected代表当前走了失败的回调函数
    //状态一旦确认 就不会发生任何改变
    // let p = new Promise(function(resolve,reject){
    //     //resolve是执行成功的回调函数，reject是执行失败的回调函数
    //     //具体是执行成功还是失败 是由书写exector函数的这个人决定的
    //     setTimeout(()=>{
    //         // resolve(123)
    //         reject(321);
    //     },3000)
    //     resolve(qqq)
    // });

    //Promise里面执行的是exector回调函数，该函数执行时报错默认调用reject函数，那么then就只会走第二个函数，如果这个函数执行成功，走第二个then的第一个函数，反之走第二个函数
    // console.log(p)
    //then接受两个函数作为参数，第一个参数对应resolve 第二个参数对应reject
    // p.then(function(data){
    //     console.log('success');
    //     console.log(data)
    // },function(err){
    //     console.log('error')
    //     console.log(err)
    //     console.log(aaa)
    // }).then(function(data2){
    //     console.log('data2',data2)
    // },function(err2){
    //     console.log('err2',err2)
    // });



    // let p1 = new Promise(function(res,rej){
    //     $.ajax({
    //         url:'./data.json',
    //         success:res,
    //         error:function(data){
    //             res(data)
    //         }
    //     })
    // })
    // p1.then(function(data){
    //     //then里面可以写两个参数 也可以只写一个参数，对应回调函数的是成功的回调，失败信息通过catch捕获
    //     console.log(data);
    //     // return 6666;
    //     return new Promise(function(res,rej){
    //         res(666);
    //     })
    // }).then(function(data2){
    //     console.log(data2);
    // }).catch(function(err){
    //     console.log(err);
    // });

    // new Promise(function(res,rej){
    //     res(123);
    //     console.log(666)
    // }).then(data=>{
    //     console.log(data)
    // }).catch(err=>{
    //     console.log(err)
    // });
    // console.log(9999);
    //输出顺序：666  9999 123 
    //then 和catch是异步的

    new Promise(function(res,rej){
        rej(123);
        console.log(666)
    }).then(data=>{
        console.log(data)
    }).catch(err=>{
        console.log(err)
    }).finally(()=>{
        console.log(7777);
    });
    console.log(9999);//不管exector走的是哪个 最后都会走finally
</script> 