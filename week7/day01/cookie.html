<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <button id="btn">按钮</button>
</body>

</html>
<script>
    /* 
        种植cookie
        cookie是前端用来保存某些数据的     前后端都可以操作
        cookie是属于我们的 前端可以自己操作  大部分的登录信息 都会放在cookie里边
        获取cookie  document.cookie 是个字符串类型 没有就会可空字符串
        种cookie  document.cookie = "qqq=1223"
            一般用来存储用户信息 大小：一般5K左右
        H5 新增的两个前端用来存数据的api 大小：5M左右
            这两个api只能由前端操作
        local 本地  session 当前会话
        localStorage
            getItem(属性名)
            setItem(属性名,属性值)
            removeItem(属性名)
            clear()全部删除
            key(属性名索引) 获取索引对应的属性值
            length 长度
        sessionStorage
            会话结束之后自动清除关闭 比如页面关闭
            方法同上
        localStorage 和 seeionStorage 的唯一区别就是  local 不会自动清除 session会自动清除

        getCookie(属性名) 对应的属性值
        setCookie(属性名,属性值,过期日期)
        removeCookie(属性名)  删除cookie 把日期设置成过期日期
        Domain 域
        path 路径

        cookie和session的区别
        cookie：
        1.cookie前后端都能设置
        2.大小在5k左右
        3.设置cookie只能自己编写方法
        4.cookie有过期日期
        5.cookie会随着请求发送给后台

        localStorage：
        1.只能由前端设置 
        2.大小在5M左右
        3.有现成的操作方法
        4.后端无法操作该属性
        5.没有过期时间

        token 埋点
        请求路径 就是接口  接口有同源策略 不在一个域 存在跨域
    */
    function getCookie(key) {
        let str = document.cookie;
        str += "; " //让最后一个能够满足正则
        // let reg = new RegExp(`(^| )${key}=([^; ]+)`);
        // return str.match(reg)? str.match(reg)[2] : null;
        let reg = new RegExp(`\\b${key}=([^; ]+)`);
        return str.match(reg)? str.match(reg)[1] : null;
    }
    getCookie('q');

    function setCookie(key, value, date) {
        if (date) {
            document.cookie = `${key}=${value} ;expires=${new Date(date)}`;
        } else {
            document.cookie = `${key}=${value} ;`;
        }
    }

    function removeCookie(key, domain) {
        let res = getCookie(key);
        if (domain) {
            document.cookie = `${key} = null ;domain=${domain} ; expires = ${new Date(199)}`;

        } else {
            document.cookie = `${key} = null ;expires = ${new Date(199)}`;

        }
        return res;
    }
</script>
<script>
    //数据埋点  神策：埋点数据分析 用户行为分析  用户画像 市场策略
    btn.onclick=function(e){
        let img = new Image();
        img.src = '接口地址'
    }
</script>